/**
* Zect v0.0.1
* (c) 2015 guankaishe
* Released under the MIT License.
*/
!function(a,b){"object"==typeof exports&&"object"==typeof module?module.exports=b():"function"==typeof define&&define.amd?define(b):"object"==typeof exports?exports.Zect=b():a.Zect=b()}(this,function(){return function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={exports:{},id:d,loaded:!1};return a[d].call(e.exports,e,e.exports,b),e.loaded=!0,e.exports}var c={};return b.m=a,b.c=c,b.p="",b(0)}([function(a,b,c){a.exports=c(1)},function(a,b,c){function d(a){return e.call(this,a||{})}function e(a){var b=(this.__proto__,this),c=a.el;if(!c&&a.template)c=document.createElement("div"),c.innerHTML=a.template;else if("string"==j.type(c))c=document.querySelector(c);else if(!(c instanceof HTMLElement))throw new Error("Unmatch el option");b.$el=c;var e=new i({deep:!0,props:a.data,computed:a.computed});Object.defineProperty(b,"$data",{enumerable:!0,get:function(){return e},set:function(a){e.$set(a)}}),j.objEach(l(d),function(a,c){f(b,a,c)}),j.objEach(m,function(a,c){f(b,a,c)});var g=a.ready;g&&g.call(b)}function f(a,b,c){function d(a){return/\:/.exec(a)?[a.split(":")[1].trim(),a.split(":")[0].trim()]:[a.trim()]}function e(b){var e={tar:b,mounted:a.$el,id:n},g=h(b).attr(f),i=c.exp,j=c.bind,k=c.update;h(b).removeAttr(f);var l=j.apply(e,(i||d)(g)||[]);if(l){var m=new Array(l.length);a.$data.$watch(function(b){l.forEach(function(c,d){0===b.indexOf(c)&&(m[d]=a.$data.$get(c),k.apply(e,m))})}),l.forEach(function(b,c){m[c]=a.$data.$get(b),k.apply(e,m)})}}var f=k.namespace+b;a.$el.hasAttribute(f)&&e(a.$el),h(a.$el).find("["+f+"]").each(function(b){a.$el.contains(b)&&e(b)})}function g(a,b){var c=a.__proto__;a.__proto__=b,a.__proto__.__proto__=c}var h=c(2),i=c(3),j=c(4),k=c(5),l=c(6),m={};d.extend=function(a){return function(){return g(this,d.prototype),e.call(this,a||{})}},d.directive=function(a,b){m[a]=b},d.namespace=function(a){k.namespace=a};var n=0;a.exports=d},function(a,b,c){"use strict";function d(a){if("string"==f.type(a)){var b=f.copyArray(document.querySelectorAll(a));return e(b)}if(a instanceof e)return a;if(a instanceof HTMLElement)return e([a]);throw new Error("Unexpect selector !")}function e(a){var b={find:function(b){var c=[];return a.forEach(function(a){c=c.concat(f.copyArray(a.querySelectorAll(b)))}),e(c)},attr:function(b,c){var d=arguments.length,e=a[0];if(d>1)e.setAttribute(b,c);else if(1==d)return(e.getAttribute(b)||"").toString();return this},removeAttr:function(b){return a.forEach(function(a){a.removeAttribute(b)}),this},addClass:function(b){return a.forEach(function(a){var c=f.copyArray(a.classList);~c.indexOf(b)||c.push(b),a.className=c.join(" ")}),this},removeClass:function(b){return a.forEach(function(a){a.className=classes.reduce(function(a,c){return c!=b&&a.push(c),a},[]).join(" ")}),this},each:function(b){return a.forEach(b),this},on:function(b,c,d){return a.forEach(function(a){a.addEventListener(b,c,d)}),this},off:function(b,c){return a.forEach(function(a){a.removeEventListener(b,c)}),this},html:function(b){var c=arguments.length;if(c>=1)a.forEach(function(a){a.innerHTML=b});else if(a.length)return a[0].innerHTML;return this},parent:function(){return a.length?e([a[0].parentNode]):null},remove:function(){return a.forEach(function(a){var b=a.parentNode;b&&b.removeChild(a)}),this},get:function(b){return a[b]},append:function(b){return a.length&&this.get(0).appendChild(b),this},replace:function(a){var b=this.parent();return b.get(0).replaceChild(a,this.get(0)),this}};return b.__proto__=e.prototype,b}var f=c(4);a.exports=d},function(a,b){!function(b,c){a.exports=c()}(this,function(){return function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={exports:{},id:d,loaded:!1};return a[d].call(e.exports,e,e.exports,b),e.loaded=!0,e.exports}var c={};return b.m=a,b.c=c,b.p="",b(0)}([function(a,b,c){"use strict";a.exports=c(1)},function(a,b,c){"use strict";function d(){return p++}function e(a){a=a||{},g.call(this,a)}function f(a){return function(b){this instanceof e||o.insertProto(this,e.prototype),g.call(this,a,b)}}function g(a,b){function c(){return A||""}function f(a){var b=arguments,d=o.copyArray(b),e=l.normalize(l.join(c(),a));b[0]="change:"+e,y.emit("change",e),x.emit.apply(x,b),d[0]=e,d.unshift("*"),x.emit.apply(x,d)}function g(a,b){return~G.indexOf(b)?n.warn("Dependency should not computed property"):(o.patch(H,b,[]),void(~H[b].indexOf(a)||H[b].push(a)))}function p(a,b,c){var d;return a instanceof e&&a.__kp__===c&&a.__root__==w.__muxid__?(d=a,d._$emitter(x),d._$_emitter(y)):d=new e({props:b,emitter:x,deep:!0,_emitter:y,__kp__:c}),void 0==d.__root__&&o.def(d,"__root__",{enumerable:!1,value:w.__muxid__}),d}function q(a,b,d){var g=o.type(b),h=d?d:l.join(c(),a);if("array"==g&&m(b,function(b,c,d,e){var g=o.copyArray(b),i=d.apply(b,e);return K[a]=q(a,b,h),f(a,b,g),i}),!z)return b;switch(g){case"object":var i={},j=b;return b instanceof e&&(j=b.$props()),o.objEach(j,function(a,b){i[a]=q(a,b,l.join(h,a))}),p(b,i,h);case"array":return b.forEach(function(a,c){b[c]=q(c,a,l.join(h,c))}),b;default:return b}}function r(a,b){var c=l.normalize(a).split("."),d=c[0];if(~G.indexOf(d))return n.warn("Can't set value to computed property \""+d+'"'),!1;if(!~J.indexOf(d))return n.warn('Property "'+d+'" has not been observed'),!1;var g,h,i=K[d];return l.set(K,a,b,function(a,c,d){d=o.copyValue(b),a instanceof e?a.hasOwnProperty(c)?a.$set(c,d):a.$add(c,d):(z&&"array"==o.type(a)&&c.match(/^\d+$/)&&(g=!0,h=a[c]),a[c]=d)}),g&&f(a,b,h),{mounted:d,next:K[d],pre:i}}function s(a,b){var c=r(a,b);if(c&&(z&&a==c.mounted||!z)&&o.diff(c.next,c.pre)){var d=c.mounted;f(d,c.next,c.pre)}}function t(a){a&&"object"==o.type(a)&&o.objEach(a,function(a,b){s(a,b)})}function u(a,b){var c=arguments.length;if(k(!a.match(/[\.\[\]]/),'Propname shoudn\'t contains "." or "[" or "]"'),~J.indexOf(a)){if(c>1)return!0}else K[a]=q(a,o.copyValue(b)),J.push(a),o.def(w,a,{enumerable:!0,get:function(){return K[a]},set:function(b){s(a,b)}}),f(a,b)}function v(a,b,c,d){switch(!1){case"string"==o.type(a):n.warn('Propname\'s should be "String"');case"array"==o.type(b):n.warn('"deps" should be "Array"');case"function"==o.type(c):n.warn('"fn" should be "Function"')}~G.indexOf(a)||(G.push(a),F[a]={deps:b,fn:c},(b||[]).forEach(function(b){for(;b;)g(a,b),b=l.digest(b)}),o.patch(I,a,{}),I[a].current=c?c.call(w,w):void 0,o.def(w,a,{enumerable:void 0===d?!0:!!d,get:function(){return I[a].current},set:function(){n.warn("Can't set value to computed property")}}),f(a,I[a].current))}var w=this,x=a.emitter||new j(w),y=a._emitter||new j(w),z=a.deep||!a.hasOwnProperty("deep"),A=a.__kp__,B={__muxid__:d()};o.insertProto(w,B);var C=a.props,D={};"function"==o.type(C)?D=C():"object"==o.type(C)&&(D=C);var E=a.computed,F={},G=[],H={},I={},J=[],K={};o.objEach(D,function(a,b){u(a,b)}),D=null,o.objEach(E,function(a,b){v(a,b.deps,b.fn,b["enum"])}),E=null,y.on("change",function(a){var b=[];(H[a]||[]).reduce(function(a,b){return~a.indexOf(b)||a.push(b),a},b),b.forEach(function(a){o.patch(I,a,{});var b=I[a].pre=I[a].current,c=I[a].current=(F[a].fn||i).call(w,w);o.diff(c,b)&&f(a,c,b)})}),B.$add=function(){var a,b,c=arguments,d=c[0];switch(o.type(d)){case"string":a=d,c.length>1?(b=c[1],u(a,b)&&s(a,b)):u(a);break;case"array":d.forEach(function(a){u(a)});break;case"object":var e;o.objEach(d,function(a,b){u(a,b)&&(!e&&(e={}),e[a]=b)}),e&&t(e);break;default:info.warn("Unexpect params")}return this},B.$computed=function(a){return"string"==o.type(a)?v.apply(null,arguments):"object"==o.type(a)?o.objEach(arguments[0],function(a,b){v(a,b.deps,b.fn,b["enum"])}):n.warn('$computed params show be "(String, Array, Function)" or "(Object)"'),this},B.$set=function(){var a=arguments,b=a.length;return b>=2||1==b&&"string"==o.type(a[0])?s(a[0],a[1]):1==b&&"object"==o.type(a[0])?t(a[0]):n.warn("Unexpect $set params"),this},B.$get=function(a){if(~J.indexOf(a))return K[a];if(~G.indexOf(a))return(F[a].fn||i).call(w,w);var b=l.normalize(a),c=b.split(".");return~J.indexOf(c[0])?l.get(K,b):void 0},B.$watch=function(){var a,b,d=arguments,e=d.length,f=d[0];if(e>=2)a="change:"+l.normalize(l.join(c(),f)),b=d[1];else{if(1!=e||"function"!=o.type(f))return n.warn("Unexpect $watch params"),i;a="*",b=f}x.on(a,b);var g=this;return function(){g.$unwatch.apply(g,d)}},B.$unwatch=function(){var a,b,d=arguments,e=d.length,f=d[0];return e>=2?(b=l.normalize(l.join(c(),f)),a=["change:"+b,d[1]]):1==e&&"string"==o.type(f)?(b=l.normalize(l.join(c(),f)),a=["change:"+b]):1==e&&"function"==o.type(f)?a=["*",f]:0==e?a=[]:n.warn("Unexpect param type of "+f),a&&x.off.apply(x,a),this},B.$props=function(){return o.copyObject(K)},B.$emitter=function(a,b){return x=a,z&&h(this.$props(),a,b),this},B._$emitter=function(a){x=a},B._$_emitter=function(a){a instanceof j&&(y=a)},t(b)}function h(a,b,c){if("object"==o.type(a)){var d=a;a instanceof e&&(a._$emitter(b,c),d=a.$props()),o.objEach(d,function(a,d){h(d,b,c)})}else"array"==o.type(a)&&a.forEach(function(a){h(a,b,c)})}function i(){}var j=c(2),k=c(3),l=c(4),m=c(5),n=c(6),o=c(7),p=0;e.extend=function(a){return f(a||{})},e.config=function(a){a.warn===!1?n.disable():n.enable()},e.emitter=function(a){return new j(a)},e.keyPath=l,a.exports=e},function(a,b,c){"use strict";function d(a){this._observers={},this._context=a}var e=c(7),f=e.patch,g=e.type;d.prototype.on=function(a,b){f(this._observers,a,[]),this._observers[a].push({cb:b})},d.prototype.off=function(a,b){var c,d=arguments,e=d.length;if(e>=2)c=[a];else if(1==e&&"function"==g(d[0]))b=d[0],c=Object.keys(this._observers);else{if(1!=e)return this._observers=[],this;c=[a]}var f=this;return c.forEach(function(a){var c=f._observers[a];if(c){var d=[];b&&c.forEach(function(a){a.cb!==b&&d.push(a)}),f._observers[a]=d}}),this},d.prototype.emit=function(a){var b=this._observers[a];if(b){var c=[].slice.call(arguments);c.shift();var d=this;b.forEach(function(a){a.cb&&a.cb.apply(d._context||null,c)})}},a.exports=d},function(a){"use strict";function b(a,b){if(!a)throw new Error(b||"Unexpect error")}a.exports=b},function(a){"use strict";function b(a){return new String(a).replace(/\[([^\[\]]+)\]/g,function(a,b){return"."+b.replace(/^["']|["']$/g,"")})}function c(a,c,d,e){var f=b(c).split("."),g=f.pop(),h=a;return f.forEach(function(a){h=h[a]}),e?e(h,g,d):h[g]=d,a}function d(a,c){var d=b(c).split("."),e=a;return d.forEach(function(a){e=e[a]}),e}function e(a,b){var c=!!a;return c||(a=""),/^\[.*\]$/.exec(b)?a+b:"number"==typeof b?a+"["+b+"]":c?a+"."+b:b}function f(a){var b=/\.[^\.]+|\[([^\[\]])+\]$/;return b.exec(a)?a.replace(b,""):""}a.exports={normalize:b,set:c,get:d,join:e,digest:f}},function(a,b,c){"use strict";var d=c(7),e=["splice","push","pop","shift","unshift","reverse"],f="__hook__";a.exports=function(a,b){e.forEach(function(c){if(a[c][f])return void a[c][f](b);var e=a[c];d.def(a,c,{enumerable:!1,value:function(){return b(a,c,e,arguments)}}),d.def(a[c],f,{enumerable:!1,value:function(a){b=a}})})}},function(a){"use strict";var b=!0;a.exports={enable:function(){b=!0},disable:function(){b=!1},warn:function(a){return b?console.warn?console.warn(a):void console.log(a):void 0}}},function(a){"use strict";a.exports={type:function(a){return/\[object (\w+)\]/.exec(Object.prototype.toString.call(a))[1].toLowerCase()},objEach:function(a,b){if(a)for(var c in a)a.hasOwnProperty(c)&&b(c,a[c])},patch:function(a,b,c){!a[b]&&(a[b]=c)},diff:function(a,b){return a!==b||a instanceof Object},merge:function(a,b){return this.objEach(b,function(b,c){a[b]=c}),a},copyArray:function(a){for(var b=a.length,c=new Array(b);b--;)c[b]=a[b];return c},copyObject:function(a){var b={};return this.objEach(a,function(a,c){b[a]=c}),b},copyValue:function(a){var b=this.type(a);switch(b){case"object":return this.copyObject(a);case"array":return this.copyArray(a);default:return a}},insertProto:function(a,b){var c=a.__proto__;a.__proto__=b,a.__proto__.__proto__=c},def:function(){return Object.defineProperty.apply(Object,arguments)}}}])})},function(a){"use strict";a.exports={type:function(a){return/\[object (\w+)\]/.exec(Object.prototype.toString.call(a))[1].toLowerCase()},copyArray:function(a){for(var b=a.length,c=new Array(b);b--;)c[b]=a[b];return c},objEach:function(a,b){if(a)for(var c in a)a.hasOwnProperty(c)&&b(c,a[c])},diff:function(a,b){var c;return c="array"==this.type(a)&&"array"==this.type(b)?this.arrayDiff:"object"==this.type(a)&&"object"==this.type(b)?this.objDiff:this.valueDiff,c.call(this,a,b)},objDiff:function(a,b){var c=Object.keys(a),d=Object.keys(b);if(c.length!=d.length)return!0;var e=this;return c.some(function(c){return!~d.indexOf(c)||e.valueDiff(a[c],b[c])})},arrayDiff:function(a,b){if(a.length!==b.length)return!0;var c=this;a.some(function(a,d){return c.valueDiff(a,b[d])})},valueDiff:function(a,b){return a!==b||a instanceof Object}}},function(a){"use strict";var b="z-";a.exports={set namespace(a){b=a+"-"},get namespace(){return b}}},function(a,b,c){"use strict";var d=c(2),e=c(5),f=c(4);a.exports=function(a){return{repeat:{bind:function(a){var b=d(this.tar);return this.$parent=b.parent(),this.$holder=document.createComment(e.namespace+"repeat"),b.replace(this.$holder,this.tar),[a]},update:function(b){function c(b,c){var d=g.tar.cloneNode(!0),e="object"==f.type(b)?b:{};e.$index=c,e.$value=b;var h=new a({el:d,data:e});return h.$parentVM=g.vm,h}if(!b||!b.forEach)return console.warn('"'+e.namespace+'repeat" only accept Array data');var g=this,h=new Array(b.length),i=this.last?f.copyArray(this.last):i,j=this.$vms?f.copyArray(this.$vms):j;b.forEach(function(a,b){var d;if(i){var e=i.indexOf(a);~e&&!f.diff(i[e],a)?(d=j[e],i.splice(e,1),j.splice(e,1),d.$index=e):d=c(a,b)}else d=c(a,b);h[b]=d}),this.$vms=h,this.last=f.copyArray(b);for(var k=this.$holder,l=h.length;l--;){var m=h[l];g.$parent.get(0).insertBefore(m.$el,k),k=m.$el}j&&j.forEach(function(a){d(a.$el).remove()})}},html:{bind:function(a){return[a]},update:function(a){d(this.tar).html(void 0===a?"":a)}},attr:{bind:function(a,b){return this.attname=b,[a]},update:function(a){a||""===a?d(this.tar).attr(this.attname,a):d(this.tar).removeAttr(this.attname)}},show:{bind:function(a){return[a]},update:function(a){this.tar.style.display=a?"":"none"}},"if":{bind:function(a){d(this.tar);return this.parent=this.tar.parentNode,this.$holder=document.createComment(e.namespace+"if"),this.parent.insertBefore(this.$holder,this.tar),this.parent.removeChild(this.tar),[a]},update:function(b){d(this.tar);b?(console.log(this.tar),this.childVM=new a({el:this.tar.cloneNode(!0),data:!1}),this.parent.insertBefore(this.childVM.$el,this.$holder)):this.tar.parentNode==this.parent&&this.parent.removeChild(this.tar)}}}}}])});