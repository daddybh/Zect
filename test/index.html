<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title></title>
</head>
<body>
    <div id="app">
        <!-- if-repeat-component -->
        <z-if is="{!disabled}">
            <z-repeat items="{items}" xname="parent">
                <z-repeat items="{$value}" xname="child-repeat">
                    <my-component data-value="{$value}"
                        method="{
                            onClick: onAlert
                        }"
                    ></my-component>
                </z-repeat>
            </z-repeat>
            <h1>switer</h1>
        </z-if>
        <!-- component-state -->
        <my-component
            z-tap="{items}"
            state="{
                items: items
            }"
            method="{
                onClick: onAlert
            }"
        ></my-component>
        <!-- local-component-ref -->
        <my-component2 ref="comp2"></my-component2>
        <!-- two way bindings -->
        <input type="text" z-model="inputs.text">
        <textarea z-model="inputs.text"></textarea>
        <select z-model="inputs.text">
            <option value="Please Input" checked>Please Input</option>
            <option value="hello">hello</option>
            <option value="world">world</option>
            <option value="renew">renew</option>
        </select>
        <p>{inputs.text}</p>
        <div contenteditable="true" z-model="inputs.text">...</div>
        <!-- directives-filter -->
        <p 
            z-class="{show: isShow; hide: !isShow}" 
            z-attr="{disabled: isShow ? isShow : ''}" 
            z-on="{click: onChangeClass}"
        >{part(title)}</p>

        <z-repeat items="{todos.call($vm)}">
            <p></p>
        </z-repeat>
    </div>
    <script src="../dist/zect.js"></script>
    <script>
        console.time('p')
        Zect.component('my-component', {
            template: '<div z-on="{click: onClick}">{subtitle}-{items}</div>',
            data: {
                items: [],
                subtitle: 'sub title'
            },
            ready: function () {
                setTimeout(function () {
                    this.$data.subtitle = 'modify'
                }.bind(this), 1000)
            },
            methods: {

            }
        })

        var app = new Zect({
            el: '#app',
            components: {
                'my-component2': Zect.extend({
                    template: '<img z-attr="{src:\'http://www.baidu.com/img/bdlogo.png\'}" alt="" />'
                })
            },
            directives: {
                tap: {
                    bind: function () {
                        // console.log(this.$el)
                    }
                }
            },
            data: function () {
                return {
                    items: [[1]],
                    title: 'zect data-binding',
                    disabled: false,
                    isShow: true,
                    person: null,
                    a: undefined,
                    inputs: {
                        text: 'Please Input'
                    }
                }
            },
            computed: {
                length: {
                    deps: ['title'],
                    fn: function () {
                        return this.title.length
                    }
                }
            },
            ready: function () {
                console.timeEnd('p')
                setTimeout( function() {
                    this.$data.text = 'renew'
                    // this.$data.isShow = false
                    this.$set('items', [[1, 2]])
                }.bind(this), 3000);
            },
            destroy: function () {

            },
            methods: {
                todos: function () {
                    return []
                },
                part: function (text) {
                    return text.split(' ')[0]
                },
                onAlert: function () {
                    alert('click')
                },
                onChangeClass: function () {
                    this.$data.isShow = false
                }
            }
        })
    </script>
</body>
</html>